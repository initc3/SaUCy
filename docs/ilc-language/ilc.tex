\def\OPTIONConf{0}%
\def\OPTIONArxiv{0}%
%
\documentclass[10pt]{article}
\input{defs}

\begin{document}

\title{Interactive Lambda Calculus (ILC) Language Definition}
\author{Kevin Liao\textsuperscript{\textasteriskcentered},
        Matthew Hammer\textsuperscript{\textdagger},
        Andrew Miller\textsuperscript{\textasteriskcentered}}
\date{\textsuperscript{\textasteriskcentered} University of Illinois,
  Urbana-Champaign \hspace{0.5cm} \textsuperscript{\textdagger} University of
  Colorado Boulder}

\maketitle
\thispagestyle{empty}

\begin{figure}[htbp]
{
  \centering

\begin{grammar}
  Modes & $m,n,p$ &$\bnfas$& $\Wm \bnfalt \Rm \bnfalt \Vm$ & (Write, Read and Value) 
\end{grammar}

\judgbox{m || n => p}{~~The parallel composition of modes $m$ and $n$ is mode~$p$.}
\begin{mathpar}
\Infer{sym}{m || n => p}{n || m => p}
\and \Infer{wv}{ }{\Wm || \Vm => \Wm}
\and \Infer{wr}{ }{\Wm || \Rm => \Wm}
\and \Infer{rr}{ }{\Rm || \Rm => \Rm}
\end{mathpar}
\\[2mm]
\judgbox{m ;; n => p}{~~The sequential composition of modes $m$ and $n$ is mode~$p$.}
\begin{mathpar}
\and \Infer{v$\ast$}{ }{\Vm ;; n => n}
\and \Infer{wv}{ }{\Wm ;; \Vm => \Wm}
\and \Infer{r$\ast$}{ }{\Rm ;; n => \Rm}
\and \Infer{wr}{ }{\Wm ;; \Rm => \Wm}
\end{mathpar}
}
Note that in particular, the following mode compositions are \emph{not derivable}:
\begin{itemize}
\item $\Wm || \Wm => p$ is \emph{not} derivable for any mode~$p$
\item $\Wm ;; \Wm => p$ is \emph{not} derivable for any mode~$p$
\end{itemize}
\caption{Syntax of modes; sequential and parallel mode composition.}
\label{fig:expr}
\end{figure}

\begin{figure}[htbp]
\centering
\judgbox{\Delta ; \Gamma |- e : \tau |> m}{~~Under $\Delta$ and $\Gamma$, expression~$e$ has type $\tau$ and mode $m$.}
\begin{mathpar}
%
\infer[\textsc{T-var}]
{\Delta; \Gamma(x) = \sigma |> m}
{\Delta; \Gamma |- x:\sigma |> m}
%
\and
%
\infer[\textsc{T-unit}]
{ }
{\Delta ; \Gamma |- \vUnit : \tyUnit |> \Mv}
%
\and
%
\infer[\textsc{T-pair}]
{m_1; m_2 => m_3\\\\
\Delta_1; \Gamma |- e_1 : \tau_1 |> m_1\\\\
\Delta_2; \Gamma |- e_2 : \tau_2 |> m_2}
{\Delta_1, \Delta_2; \Gamma |- (e_1, e_2) : \tau_1 \times \tau_2 |> m_3}
%
\and
%
\infer[\textsc{T-inst}]
{\Delta; \Gamma |- e : \sigma_1 |> m\\
\sigma_1 \sqsubseteq \sigma_2}
{\Delta; \Gamma |- e : \sigma_2 |> m}
%
\and
%
\infer[\textsc{T-gen}]
{\Delta; \Gamma |- e : \sigma |> m\\
\alpha \not \in {\rm fv}(\Gamma)}
{\Delta; \Gamma |- e : \forall\alpha . \sigma}
%
\and
%
\infer[\textsc{T-lam}]
{\Delta ; \Gamma, x:\tau_1 |-       e : \tau_2      |> m}
{\Delta ; \Gamma      |- \lam{x} e : \tau_1 -> \tau_2 |> m}
%
\and
%
\infer[\textsc{T-app}]
{\Delta_1 ; \Gamma |- e_1 : \tau_1 -> \tau_2 |> m\\\\
 \Delta_2 ; \Gamma |- e_2 : \tau_1        |> \Vm}
{\Delta_1, \Delta_2 ; \Gamma |- e_1 e_2 : \tau_2 |> m}
%
\and
%
\infer[\textsc{T-let}]
{ m_1 ;; m_2 => m_3\\\\
\Delta_1 ; \Gamma |- e_1 : \sigma |> m_1 \\\\
\Delta_2 ; \Gamma, x:\sigma |- e_2 : \tau |> m_2
}
{\Delta_1, \Delta_2 ; \Gamma |- \Let{e_1}{x}{e_2} : \tau |> m_3}
%
\and
%
\infer[\textsc{T-fix?}]
{\Delta; \Gamma, f:\tau |- e : \tau |> m}
{\Delta; \Gamma |- \fix{f}{e} : \tau |> m}
%
\and
%
\infer[\textsc{T-nu}]
{\Delta; \Gamma, x: (\tyRd{\tau_1} \times \tyWr{\tau_1}) |- e : \tau_2 |> m}
{\Delta; \Gamma |- \eNu{x}{e} : \tau_2 |> m}
%
\\
%
\infer[\textsc{T-rd?}]
{\Delta; \Gamma |- e : \tyRd \tau |> \Vm}
{\Delta    |- \eRd{e} : (\tau \times \tyRd \tau) |> \Rm}
%
\and
%
\infer[\textsc{T-wr}]
{\Delta_1; \Gamma   |- e_1 : \tau\\
 \Delta_2; \Gamma   |- e_2 : \tyWr{\tau}}
{\Delta_1, \Delta_2 |- \eWr{e_1}{e_2} : \tyUnit |> \Wm}
%
\\
%
\infer[\textsc{T-fork}]
{
 m_1 || m_2 => m_3
 \\\\
 \Delta_1; \Gamma |- e_1 : \tau_1 |> m_1
 \\\\
 \Delta_2; \Gamma |- e_2 : \tau_2 |> m_2
}
{\Delta_1, \Delta_2; \Gamma |- e_1 \xFork e_2 : \tau_2 |> m_3}
%
\and
%
\infer[\textsc{T-thunk}]
{\Delta; \Gamma |- e : \tau |> m}
{\Delta; \Gamma |- \thunk{e} : \tyU{\tau} |> m}
%
\and
%
\infer[\textsc{T-force?}]
{\Delta; \Gamma |- e : \tyU{\tau} |> m}
{\Delta; \Gamma |- \eForce{e} : \tau |> m}
%
\and
%
\infer[\textsc{T-ref}]
{\Delta; \Gamma |- e : \tau |> m}
{\Delta; \Gamma |- \Ref{e} : \tyM{\tau} |> m}
%
\and
%
\infer[\textsc{T-deref}]
{\Delta; \Gamma |- e : \tyM{\tau} |> m}
{\Delta; \Gamma |- \Deref{e} : \tau |> m}
%
\and
%
\infer[\textsc{T-assign}]
{\Gamma(x) = \tyM{\tau} \\ \Delta, \Gamma |- e : \tau |> m}
{\Delta; \Gamma |- \Assign{x}{e} : \tyUnit |> m}
%
\and
%
\infer[\textsc{T-seq}]
{m_1 ;; m_2 => m_3\\\\
\Delta_1; \Gamma |- e_1 : \tau_1 |> m_1\\\\
\Delta_2; \Gamma |- e_2 : \tau_2 |> m_2}
{\Delta_1, \Delta_2; \Gamma |- \Seq{e_1}{e_2} : \tau_2 |> m_3}
\end{mathpar}
\end{figure}

\bibliographystyle{unsrt}
\bibliography{references}

\end{document}
